webpackJsonp([1],{"3cXf":function(t,e,i){t.exports={default:i("L+o2"),__esModule:!0}},"L+o2":function(t,e,i){var s=i("ZuHZ"),n=s.JSON||(s.JSON={stringify:JSON.stringify});t.exports=function(t){return n.stringify.apply(n,arguments)}},UU7J:function(t,e){},gzQo:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("3cXf"),n=i.n(s),r=i("pLUr"),a={data:function(){return{active:0,childrenId:localStorage.getItem("currentChildId"),currentDate:"00:10",currentId:"",currentName:"",timeType:"",time_length:[],time_user:[],timeList:[],currentSlideId:"",settingShow:!1,limitappsArr:[],topList:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23"],topNum:[],sunday:[{value:"sun",name:"日"},{value:"mon",name:"一"},{value:"tues",name:"二"},{value:"wed",name:"三"},{value:"thurs",name:"四"},{value:"fri",name:"五"},{value:"sat",name:"六"}],sundayCutton:"日",currentFreeTime:[],guardTimeArr:[],sunValue:"sun",id:"",flags:this.$route.query.flag}},mounted:function(){this.getGuardTime()},methods:{modify:function(t){var e=this,i=["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23"];this.guardTimeArr.forEach(function(s,n){e.sunValue==s.sunday&&(0==t.length?(e.guardTimeArr[n][e.sunValue].length=0,e.guardTimeArr[n][e.sunValue].push({startTime:"00:00",endTime:"24:00"}),e.currentFreeTime.length=0,e.currentFreeTime.push({time:"00:00-24:00"})):(s.sunTemporary=t,s.sunTemporary.forEach(function(t){i.forEach(function(s,r){if(t==s)if(i.splice(r,1),0==i.length)e.guardTimeArr[n][e.sunValue].length=0,e.guardTimeArr[n][e.sunValue].push({startTime:"00:00",endTime:"00:00"}),e.currentFreeTime.length=0,e.currentFreeTime.push({time:"00:00-00:00"});else{for(var a=[],u=[],o=0;o<i.length;o++)i[o+1]-i[o]==1?u.push(i[o]):(u.push(i[o]),a.push(u),u=[]);var c=[];a.forEach(function(t){c.push({startTime:t[0]<10?"0"+t[0]+":00":t[0]+":00",endTime:parseInt(t[t.length-1])+1<10?"0"+(parseInt(t[t.length-1])+1)+":00":parseInt(t[t.length-1])+1+":00"})}),e.guardTimeArr[n][e.sunValue]=c,e.currentFreeTime.length=0,c.forEach(function(t){e.currentFreeTime.push({time:t.startTime+"-"+t.endTime})})}})})))})},sundayTime:function(t,e){var i=this;this.sundayCutton=t,this.sunValue=e,this.guardTimeArr.forEach(function(t,s){e==t.sunday&&i.publicTime(t[t.sunday],s)})},publicTime:function(t,e){var i=this,s="",n="",r=[],a=[];t.forEach(function(t){a.push({time:t.startTime+"-"+t.endTime}),s=t.startTime.substr(0,1)>0?t.startTime.substr(0,2):t.startTime.substr(1,1),n=t.endTime.substr(0,1)>0?t.endTime.substr(0,2):t.endTime.substr(1,1);for(var e=parseInt(s);e<parseInt(n);e++)r.push(e.toString())}),this.guardTimeArr[e].sunTemporary=["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23"],r.forEach(function(t){i.guardTimeArr[e].sunTemporary.forEach(function(s,n){t==s&&i.guardTimeArr[e].sunTemporary.splice(n,1)})}),this.topNum=this.guardTimeArr[e].sunTemporary,this.currentFreeTime=a},getGuardTime:function(){this.guardTimeArr.push({sunday:"sun",sun:[{startTime:"00:00",endTime:"03:00"},{startTime:"04:00",endTime:"05:00"}],sunTemporary:[],topLists:[],dayCutton:"日"},{sunday:"mon",mon:[{startTime:"00:00",endTime:"24:00"}],sunTemporary:[],topLists:[],dayCutton:"一"},{sunday:"tues",tues:[{startTime:"00:00",endTime:"24:00"}],sunTemporary:[],topLists:[],dayCutton:"二"},{sunday:"wed",wed:[{startTime:"00:00",endTime:"24:00"}],sunTemporary:[],topLists:[],dayCutton:"三"},{sunday:"thurs",thurs:[{startTime:"00:00",endTime:"24:00"}],sunTemporary:[],topLists:[],dayCutton:"四"},{sunday:"fri",fri:[{startTime:"00:00",endTime:"24:00"}],sunTemporary:[],topLists:[],dayCutton:"五"},{sunday:"sat",sat:[{startTime:"00:00",endTime:"24:00"}],sunTemporary:[],topLists:[],dayCutton:"六"})},save:function(){var t;t={id:this.id,mon:n()(this.guardTimeArr[1].mon),tues:n()(this.guardTimeArr[2].tues),wed:n()(this.guardTimeArr[3].wed),thurs:n()(this.guardTimeArr[4].thurs),fri:n()(this.guardTimeArr[5].fri),sat:n()(this.guardTimeArr[6].sat),sun:n()(this.guardTimeArr[0].sun),"children.id":this.childrenId},this.axios.put("/screen/time/rule",t,{server:"desktop"}).then(function(t){t?Object(r.b)("保存成功"):Object(r.b)("保存失败")})},onClick:function(t,e){},getLimitApps:function(){var t=this;this.axios.get("/application",{params:{childrenId:this.childrenId,applicationStatus:"BE_LIMITED"},server:"desktop"}).then(function(e){t.limitappsArr=e.resultData})},forbidItx:function(t){var e=this;r.a.confirm({title:"禁用",message:"是否禁止当前应用的使用？"}).then(function(){e.axios.put("/application/set/status",{id:t.id,applicationStatus:"BLACK_LIST"},{server:"desktop"}).then(function(t){t?(Object(r.b)("已成功禁止该应用！"),e.getLimitApps()):Object(r.b)("禁止失败！"),e.getLimitApps()})}).catch(function(){r.a.close()})},freeItx:function(t){var e=this;r.a.confirm({title:"解除限制",message:"是否解除对当前应用的限制？"}).then(function(){e.axios.put("/application/set/status",{id:t.id,applicationStatus:"WHITE_LIST"},{server:"desktop"}).then(function(t){t?(Object(r.b)("已成功解除限制！"),e.getLimitApps()):Object(r.b)("解除限制失败！"),e.getLimitApps()})}).catch(function(){r.a.close()})},liMove:function(t){this.currentSlideId=t},onClose:function(t,e){var i=this;switch(t){case"right":r.a.confirm({message:"确定删除吗？"}).then(function(){i.axios.delete("/day/rule/"+i.currentSlideId,{server:"desktop"}).then(function(t){t&&i.getMSG()})}).catch(function(){e.close()})}},set_time:function(t){this.$router.push({path:"timemanagement/settime",name:"SetTime",query:{item:n()(t)}})},time_pop:function(t){this.currentId=t.id,this.currentName=t.name;var e=Math.floor(t.usableTime/60)+":"+t.usableTime%60;this.currentDate=e,this.settingShow=!0},confirm:function(){var t=this,e=this.currentDate.split(":"),i=60*parseInt(e[0])+parseInt(e[1]);this.axios.put("/day/rule",{id:this.currentId,name:this.currentName,usableTime:i,"children.id":this.childrenId,type:"1"},{server:"desktop"}).then(function(e){t.settingShow=!1,t.getMSG(),Object(r.b)("您设置的每日使用时长将会立即生效")})},cancel:function(){this.settingShow=!1},time_back:function(){history.go(-1)},getMSG:function(){var t=this;"{}"!=n()(this.$route.query)?2==this.$route.query.flag&&(this.active=1):(document.getElementsByClassName("van-tabs__wrap")[0].style.display="none",this.active=0),this.axios.get("/day/rule/parent",{params:{childrenId:this.childrenId},server:"desktop"}).then(function(e){t.timeList=e.resultData,t.time_length=t.timeList.filter(function(t){return t.usableTime>=0}),t.time_user=t.timeList.filter(function(t){return t.startTime}),t.time_user.forEach(function(t,e){for(var i=t.week.split(","),s=[],n=[],r=0;r<i.length;r++)"MON"==i[r]?(s.push("周一"),n.push(1)):"TUES"==i[r]?(s.push("周二"),n.push(2)):"WED"==i[r]?(s.push("周三"),n.push(3)):"THURS"==i[r]?(s.push("周四"),n.push(4)):"FRI"==i[r]?(s.push("周五"),n.push(5)):"SAT"==i[r]?(s.push("周六"),n.push(6)):"SUN"==i[r]&&(s.push("周日"),n.push(7));t.weekStr=s.join(","),t.numArr=n}),t.time_user.map(function(e){t.timeType=e.name})})}}},u={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"timemanagement"},[i("van-tabs",[i("van-tab",{staticClass:"showFlag"},[i("div",{staticClass:"guardTime"},[i("ol",{staticClass:"sunday"},t._l(t.sunday,function(e,s){return i("li",{key:s,staticClass:"sundaySpan",on:{click:function(i){return t.sundayTime(e.name,e.value)}}},[t._v(t._s(e.name)+"\n                        "),t.sunValue==e.value?i("b",{staticClass:"triangle"}):t._e()])}),0),t._v(" "),i("div",{staticClass:"freeTimeLegend"},[i("p",{staticClass:"sundayFreeTime"},[t._v("周"+t._s(t.sundayCutton)+"自由时间")]),t._v(" "),i("div",{staticClass:"sundayFreeTime-right"},[i("b"),t._v(" "),i("span",{staticStyle:{"padding-right":"0.2rem"}},[t._v("自由时间")]),t._v(" "),i("b",{staticStyle:{background:"#f68c98"}}),t._v(" "),"iOS"==t.deviceType?i("span",[t._v("锁控时间")]):i("span",[t._v("锁屏时间")])])]),t._v(" "),i("div",{staticClass:"dateList"},[i("div",{staticClass:"morning"},[i("div",{staticClass:"morning-left"},[i("p",[t._v("上"),i("br"),t._v("午")]),t._v(" "),i("p",[t._v("下"),i("br"),t._v("午")])]),t._v(" "),i("div",{staticClass:"morning-right"},[i("van-checkbox-group",{on:{change:t.modify},model:{value:t.topNum,callback:function(e){t.topNum=e},expression:"topNum"}},t._l(t.topList,function(e,s){return i("van-checkbox",{key:s,attrs:{name:e}},[t._v(" "+t._s(e)+"\n                                ")])}),1)],1)])]),t._v(" "),i("div",{staticClass:"timeSlot"},[i("p",{staticClass:"fl"},[t._v("自由时间 : ")]),t._v(" "),i("div",{staticClass:"timelist fr"},t._l(t.currentFreeTime,function(e,s){return i("span",{key:s},[t._v(t._s(e.time))])}),0)])]),t._v(" "),i("section",{staticClass:"conserve-btn",on:{click:t.save}},[t._v("保存")])])],1)],1)},staticRenderFns:[]};var o=i("C7Lr")(a,u,!1,function(t){i("UU7J")},null,null);e.default=o.exports}});